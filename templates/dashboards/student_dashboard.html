{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Dashboard</title>

<link rel="stylesheet" href="{% static 'css/student_dashboard.css' %}">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>

<div class="dashboard">

    <!-- ================= SIDEBAR ================= -->
    <div class="sidebar" id="sidebar">

        <button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>

        <div class="logo">ELP</div>

        <a href="{% url 'student_dashboard' %}" class="active">
            ğŸ“š <span>My Courses</span>
        </a>

        <a href="{% url 'courses:explore_courses' %}">
            ğŸ”¥ <span>Explore Courses</span>
        </a>

        <a href="#">
            ğŸ“ <span>Exams</span>
        </a>

        <a href="#">
            ğŸ† <span>Certificates</span>
        </a>

        <form method="POST" action="{% url 'logout' %}">
            {% csrf_token %}
            <button class="logout">ğŸšª Logout</button>
        </form>

    </div>

    <!-- ================= MAIN ================= -->
    <div class="main">

        <div class="topbar">
            <h1>Welcome, {{ request.user.full_name }} ğŸ‘‹</h1>

            <button class="profile-btn" onclick="toggleProfile()">
                View Profile
            </button>
        </div>

        <!-- PROFILE CARD -->
        <div class="profile-card" id="profileCard">
            <h2>Your Profile</h2>
            <p><strong>Name:</strong> {{ request.user.full_name }}</p>
            <p><strong>Email:</strong> {{ request.user.email }}</p>
            <p><strong>Role:</strong> {{ request.user.role }}</p>
            <p><strong>Register No:</strong> {{ request.user.registration_number }}</p>
        </div>

        <h2 class="section-title">Available Courses</h2>

        <div class="course-grid">

            {% for course in courses %}
            <div class="course-card">

                {% if course.image %}
                <img src="{{ course.image.url }}" alt="{{ course.title }}">
                {% endif %}

                <h3>{{ course.title }}</h3>

                <p>{{ course.description|truncatechars:80 }}</p>

                <p><strong>Tutor:</strong> {{ course.tutor.user.full_name }}</p>

                <a href="{% url 'courses:course_detail' course.id %}">
                    Start Learning â†’
                </a>

            </div>
            {% empty %}
                <p>No courses available.</p>
            {% endfor %}

        </div>

    </div>

</div>

<script>
function toggleSidebar(){
    document.getElementById("sidebar")
    .classList.toggle("collapsed");
}

function toggleProfile(){
    const card = document.getElementById("profileCard");
    card.style.display =
    card.style.display === "block" ? "none" : "block";
}
</script>

</body>
</html>
