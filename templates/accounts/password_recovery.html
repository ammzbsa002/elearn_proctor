{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Password Recovery | E-Learn Proctor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/auth.css' %}">
</head>
<body>

<!-- ================= NAVBAR ================= -->
<header class="navbar">
    <div class="nav-container">
        <div class="logo">E-Learn Proctor</div>
        <nav class="nav-links">
            <a href="/" class="nav-link">Home</a>
            <a href="{% url 'login' %}" class="login-btn">Login</a>
        </nav>
    </div>
</header>

<!-- ================= MESSAGES ================= -->
{% if messages %}
<div class="messages">
    {% for message in messages %}
        <div class="message {{ message.tags }}">{{ message }}</div>
    {% endfor %}
</div>
{% endif %}

<!-- ================= MAIN ================= -->
<div class="auth-wrapper">

    <!-- ðŸ”´ IMPORTANT: container is what we animate & shake -->
    <div class="container {% if step == 'otp' %}right-panel-active{% endif %}" id="container">

        <!-- ===== EMAIL STEP ===== -->
        <div class="form-container sign-in-container">
            <form method="POST">
                {% csrf_token %}
                <h1>Forgot Password</h1>
                <span>Enter your registered email</span>

                <input type="email" name="email" placeholder="Registered Email" required>

                <button type="submit">Send OTP</button>
            </form>
        </div>

        <!-- ===== OTP STEP ===== -->
<div class="form-container sign-up-container">
    <form method="POST">
        {% csrf_token %}
        <h1>Verify OTP</h1>
        <span>Enter OTP and new password</span>

        <input type="text" name="otp" placeholder="6-digit OTP" maxlength="6" required>

        <!-- â± TIMER -->
        <div class="otp-timer">
            OTP expires in <span id="timer">02:00</span>
        </div>

        <!-- ðŸ” PASSWORD -->
        <input type="password" id="password" name="password"
               placeholder="New Password" required>

        <!-- ðŸ”¥ STRENGTH BAR -->
        <div class="strength-bar">
            <div id="strengthFill"></div>
        </div>
        <small id="strengthText"></small>

        <button type="submit">Reset Password</button>

        <!-- ðŸ” RESEND -->
        <button type="button" class="resend-btn" id="resendOtp">
            Resend OTP
        </button>
    </form>
</div>


        <!-- ===== OVERLAY ===== -->
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h1>Almost Done!</h1>
                    <p>Verify OTP to reset your password</p>
                </div>

                <div class="overlay-panel overlay-right">
                    <h1>Forgot Password?</h1>
                    <p>Weâ€™ll help you recover your account</p>
                </div>
            </div>
        </div>

    </div>
</div>

{% if reset_done %}
<div class="success-overlay show" id="successOverlay">
    <div class="success-card">
        <div class="checkmark">âœ“</div>
        <p>Password Reset Successful</p>
        <small>Redirecting to login in
            <span id="redirectTimer">3</span> seconds...
        </small>
    </div>
</div>
{% endif %}



<script src="{% static 'js/recovery.js' %}"></script>

</body>
</html>
